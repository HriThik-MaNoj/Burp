#!/bin/bash

# =====================================================
#        â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
#        â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•
#        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• 
#        â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— 
#        â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—
#        â•šâ•â•  â•šâ•â•â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•
#            ğŸ”¥ Hri7h!k Launcher ğŸ”¥
# =====================================================

# ğŸ§° Install Dependencies (Java, figlet, lolcat)
install_dependencies() {
    echo "ğŸ”§ Checking & Installing Dependencies..."

    if ! command -v java &> /dev/null; then
        echo "â³ Java not found. Installing OpenJDK..."
        sudo apt update
        sudo apt install -y default-jdk
    else
        echo "âœ” Java is already installed."
    fi

    if ! command -v figlet &> /dev/null; then
        echo "â³ Installing figlet..."
        sudo apt install -y figlet
    fi

    if ! command -v lolcat &> /dev/null; then
        echo "â³ Installing lolcat..."
        sudo apt install -y lolcat
    fi

    echo "âœ… All dependencies installed."
    echo ""
}

# ğŸ¨ Show Banner
show_banner() {
    clear
    figlet "Hri7h!k Launcher" | lolcat
    echo ""
}

# ğŸ“ Prompt for JAR File
prompt_for_path() {
    local prompt_message=$1
    local default_file=$2
    read -p "$prompt_message [Press Enter to use './$default_file']: " input_path
    if [[ -z "$input_path" ]]; then
        input_path="./$default_file"
    fi
    if [[ ! -f "$input_path" ]]; then
        echo "âŒ Error: File '$input_path' not found!"
        exit 1
    fi
    echo "$(realpath "$input_path")"
}

# âœ… Main Execution
install_dependencies
show_banner

JAVA_BIN=$(command -v java)
echo "âœ” Java found at: $JAVA_BIN"
echo ""

AGENT_JAR=$(prompt_for_path "Enter location for the Loader JAR file" "loader.jar")
TARGET_JAR=$(prompt_for_path "Enter location for the BurpSuite JAR file" "burpsuite_pro.jar")
echo ""

# ğŸš€ Run Java with Agent
echo "ğŸš€ Launching BurpSuite with Loader agent..."
"$JAVA_BIN" \
    --add-opens=java.desktop/javax.swing=ALL-UNNAMED \
    --add-opens=java.base/java.lang=ALL-UNNAMED \
    --add-opens=java.base/jdk.internal.org.objectweb.asm=ALL-UNNAMED \
    --add-opens=java.base/jdk.internal.org.objectweb.asm.tree=ALL-UNNAMED \
    --add-opens=java.base/jdk.internal.org.objectweb.asm.Opcodes=ALL-UNNAMED \
    -javaagent:"$AGENT_JAR" \
    -noverify \
    -jar "$TARGET_JAR"
